<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · BcdiStrain.jl</title><meta name="title" content="Usage · BcdiStrain.jl"/><meta property="og:title" content="Usage · BcdiStrain.jl"/><meta property="twitter:title" content="Usage · BcdiStrain.jl"/><meta name="description" content="Documentation for BcdiStrain.jl."/><meta property="og:description" content="Documentation for BcdiStrain.jl."/><meta property="twitter:description" content="Documentation for BcdiStrain.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BcdiStrain.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">BcdiStrain</a></li><li class="is-active"><a class="tocitem" href>Usage</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#API"><span>API</span></a></li></ul></li><li><a class="tocitem" href="../refs/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/byu-cxi/BcdiStrain.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/main/docs/src/use.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h1><p>BcdiStrain implements projection-based algorithms in operator-style format. This means that the multiplication (*) and power (^) operators are used to apply operators to some current state. This may look like the following:</p><pre><code class="nohighlight hljs">er = BcdiTrad.ER()
hio = BcdiTrad.HIO(0.9)
state = BcdiTrad.State(intensities, trues(size(intensities)))

(er * hio^20)^5 * state</code></pre><p>This short script applies 20 HIO iterations and one ER iterations for a total of 5 times. This makes it easy to implement very complex recipes for phase retrieval algorithms.</p><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BcdiStrain.State" href="#BcdiStrain.State"><code>BcdiStrain.State</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">State(intensities, gVecs, recSupport)
State(intensities, gVecs, recSupport, support)</code></pre><p>Create a reconstruction object. <code>intensities</code> is a vector of fully measured diffraction peaks, <code>gVecs</code> is a vector of peak locations, and <code>recSupport</code> is a vector of masks over  the intensities that removes those intenities from the reconstruction process.</p><p>The initialization process shifts each peak to be centered in the Fourier sense (i.e. the center of mass of the peak is moved to the edge of the image, or the zero frequency). If the support is not passed in, an initial guess of the support is created by taking an IFFT of the intensities and including everything above 0.1 times the maximum value.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/7c51ced78e1d309fc86ffe6ba07fbf303ca8aca5/src/State.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BcdiStrain.ER" href="#BcdiStrain.ER"><code>BcdiStrain.ER</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ER()</code></pre><p>Create an object that applies one iteration of Error Reduction (ER) to the currently <a href="#BcdiStrain.Mount"><code>Mount</code></a>ed peak. ER is an iterative projection  algorithm that enforces two constraints, (1) the modulus constraint  and (2) the support constraint:</p><ol><li>When moved to reciprocal space, the reconstructed object must match the diffraction pattern.</li><li>The reconstructed object must fully lie within the support.</li></ol><p>One iteration of ER first applies the modulus constraint, then the support constraint to the object, then returnns.</p><p>Gradient descent is an alternate way to view the ER algorithm becausee ER is equivalent to gradient descent with a step size of 0.5.</p><p>More information about the ER algorithm can be found in [<a href="../refs/#Fienup1978">1</a>, <a href="../refs/#Marchesini2007">2</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/7c51ced78e1d309fc86ffe6ba07fbf303ca8aca5/src/Operators.jl#L14-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BcdiStrain.HIO" href="#BcdiStrain.HIO"><code>BcdiStrain.HIO</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">HIO(beta)</code></pre><p>Create an object that applies an iteration of hybrid input-output (HIO) to the currently <a href="#BcdiStrain.Mount"><code>Mount</code></a>ed peak. On the interior of the support,  HIO is equivalent to applying the modulus constraint as described in the  <a href="#BcdiStrain.ER"><code>ER</code></a> algorithm, and on the exterior of the support, HIO is equal  to the current reconstruction minus a fraction of the output after applying  the modulus constraint, that is,</p><p class="math-container">\[\rho_{i+1} = \begin{cases}
ER(\rho_i) &amp; \rho \in support \\
\rho_i - \beta * ER(\rho_i) &amp; \rho \notin support
\end{cases}\]</p><p>Marchesini [<a href="../refs/#Marchesini2007">2</a>] has shown that the HIO algorithm is equivalent to a mini-max problem.</p><p>More information about the HIO algorithm can be found in [<a href="../refs/#Fienup1978">1</a>, <a href="../refs/#Marchesini2007">2</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/7c51ced78e1d309fc86ffe6ba07fbf303ca8aca5/src/Operators.jl#L46-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BcdiStrain.Shrink" href="#BcdiStrain.Shrink"><code>BcdiStrain.Shrink</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Shrink(threshold, sigma, state::State)</code></pre><p>Create an object that applies one iteration of the shrinkwrap algorithm to the current real space object. Shrinkwrap first applies a Gaussian  blur to the current reconstruction using <code>sigma</code> as the width of the Gaussian.  The support is then created from everything above the <code>threshold</code> times  maximum value of the blurred object.</p><p>Further information about the shrinkwrap algorithm can be found in [<a href="../refs/#Marchesini2003a">3</a>].</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/7c51ced78e1d309fc86ffe6ba07fbf303ca8aca5/src/Operators.jl#L81-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BcdiStrain.Center" href="#BcdiStrain.Center"><code>BcdiStrain.Center</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Center(state)</code></pre><p>Create an object that centers the current real space object. The center of mass of the support is calculated and the object is moved so the center of mass is centered in the Fourier transform sense. In other words, the center of mass is moved to the zeroth frequency, or the bottom left corner of the image.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/7c51ced78e1d309fc86ffe6ba07fbf303ca8aca5/src/Operators.jl#L105-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BcdiStrain.Mount" href="#BcdiStrain.Mount"><code>BcdiStrain.Mount</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Mount(beta, state, primitiveRecipLattice)</code></pre><p>Create an object that mounts a new peak. The current real space object is projected back to update the magnitude of the electron density and the displacement field. A new peak is selected at random and the current solution is projected out to this peak.</p><p>The paper that describes this algorithm is currently in submission.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/byu-cxi/BcdiStrain.jl/blob/7c51ced78e1d309fc86ffe6ba07fbf303ca8aca5/src/Operators.jl#L145-L154">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« BcdiStrain</a><a class="docs-footer-nextpage" href="../refs/">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.6.0 on <span class="colophon-date" title="Monday 26 August 2024 16:42">Monday 26 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
